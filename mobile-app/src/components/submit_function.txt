const submit = async () => {
  if (!props.latlng) return;
  if (!type.value || !description.value.trim()) {
    alert("Veuillez remplir tous les champs obligatoires");
    return;
  }
  
  await nextTick();
  saving.value = true;
  
  try {
    await signalements.addSignalement({
      latitude: props.latlng.lat,
      longitude: props.latlng.lng,
      type: type.value,
      description: description.value.trim(),
      photo: photo.value
    });
    
    await nextTick();
    saving.value = false;
    emit("submitted");
  } catch (error) {
    console.error(" Erreur lors de la sauvegarde:", error);
    await nextTick();
    saving.value = false;
    alert("Erreur lors de la sauvegarde. Veuillez réessayer.");
  }
};
